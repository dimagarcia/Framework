DECLARE
    nuN integer; -- Quantity of network
    nuOptimal_level INTEGER := 49;--176;
    nuStrategy NUMBER := 0;
    sbIdx varchar2(256);
    idx binary_integer;
    idx2 binary_integer;
    tbWeightedAdjacencyMatrix pkBayesianMapper.tytbRow;
    ----------------------------------------------------------------------------
      PROCEDURE printAdjacencyMatrix(inuNetworks in integer)
      IS
          nuIdx                     INTEGER;
          nuIdx2                    INTEGER;
      BEGIN
         nuIdx := tbWeightedAdjacencyMatrix.FIRST;
         LOOP
            EXIT WHEN nuIdx IS NULL;
            nuIdx2 := tbWeightedAdjacencyMatrix (nuIdx).FIRST;
            LOOP
               EXIT WHEN nuIdx2 IS NULL;
               DBMS_OUTPUT.put_line (nuIdx || ' ' || nuIdx2 || ' '
                  || tbWeightedAdjacencyMatrix (nuIdx) (nuIdx2) / inuNetworks);
                  --|| tbWeightedAdjacencyMatrix (nuIdx) (nuIdx2) );
               nuIdx2 := tbWeightedAdjacencyMatrix (nuIdx).NEXT (nuIdx2);
            END LOOP;
            nuIdx := tbWeightedAdjacencyMatrix.NEXT (nuIdx);
         END LOOP;
      END printAdjacencyMatrix;
    ----------------------------------------------------------------------------
BEGIN
    -- Define optimal level and Scenario (2-Max In-grade 1-Min Epsilon-Independence)
    --nuOptimal_level := 49; --55; --49; --1396;
    --nuStrategy := 5; --12;

	-- Inizializate cardianality of values sets for each variable
	pkBayesianMapper.tbR(1) := 3; pkBayesianMapper.tbR(2) := 3;
	pkBayesianMapper.tbR(3) := 3; pkBayesianMapper.tbR(4) := 3;
	pkBayesianMapper.tbR(5) := 3; pkBayesianMapper.tbR(6) := 3;
	/* pkBayesianMapper.tbR(7) := 3; pkBayesianMapper.tbR(8) := 3;
	pkBayesianMapper.tbR(9) := 3;*/ --pkBayesianMapper.tbR(10) := 3;
	--pkBayesianMapper.tbR(11) := 3;
    /*pkBayesianMapper.tbR(10) := 3;
	pkBayesianMapper.tbR(11) := 3; pkBayesianMapper.tbR(12) := 3;
	pkBayesianMapper.tbR(13) := 3; pkBayesianMapper.tbR(14) := 3;
	pkBayesianMapper.tbR(15) := 3; pkBayesianMapper.tbR(16) := 3;*/

    -- Initialize Adjacency Matrix
    tbWeightedAdjacencyMatrix := pkBayesianMapper.ftbLoadMatrix (1);

   --pkBNBinaryRepresentation.LoadMassivelyBNBR(nuOptimal_level,null, nuStrategy);
/*   pkBNBinaryRepresentation.LoadMassivelyBNBR(197,null, 0); */
   --pkBNBinaryRepresentation.PrintBNBR;
   ----pkBNBinaryRepresentation.LoadMassivelyBNBR(1,null, 5);
   
    -- 2019-03-08 iterLoadMassivelyBNBR
    /* PASO 1 */
    --pkBNBinaryRepresentation.iterLoadMassivelyBNBR(1000,1,11000, 4);
    --pkBNBinaryRepresentation.iterLoadMassivelyBNBR(1000,1,12000, 0);
    -- 20190427
    --pkBNBinaryRepresentation.iterLoadMassivelyBNBR(1000,1,12000, 5);

    -- 20190504
    --pkBNBinaryRepresentation.iterLoadMassivelyBNBR(1000,1,6000, 7);
    
    -- 20190729
    --pkBNBinaryRepresentation.iterLoadMassivelyBNBR(1000,1, 9000 , 10); -- To

    -- 20190812
    --pkBNBinaryRepresentation.iterLoadMassivelyBNBR(1000,1, 8000 , 12); -- To
    pkBNBinaryRepresentation.iterLoadMassivelyBNBR(1000,1, 9000 , 14); -- To

    pkBNBinaryRepresentation.PrintBNBR;

    /* PASO 2
    sbIdx := pkBNBinaryRepresentation.tbBNBR.first;
    LOOP
        EXIT WHEN sbIdx IS NULL;
        pkBayesianMapper.tbAdjacencyMatrix := pkBNBinaryRepresentation.ftbLoadAdjMatrix(sbIdx);
        -->
         idx := pkBayesianMapper.tbAdjacencyMatrix.FIRST;
         LOOP
            EXIT WHEN idx IS NULL;
            idx2 := pkBayesianMapper.tbAdjacencyMatrix (idx).FIRST;
            LOOP
               EXIT WHEN idx2 IS NULL;
               IF (pkBayesianMapper.tbAdjacencyMatrix (idx)(idx2) = 1) THEN
                tbWeightedAdjacencyMatrix(idx)(idx2) :=
                    tbWeightedAdjacencyMatrix(idx)(idx2) + 1;
               END IF;
               idx2 := pkBayesianMapper.tbAdjacencyMatrix (idx).NEXT (idx2);
            END LOOP;
            idx := pkBayesianMapper.tbAdjacencyMatrix.NEXT (idx);
         END LOOP;
        --<
        sbIdx := pkBNBinaryRepresentation.tbBNBR.next(sbIdx);
    END LOOP;

    printAdjacencyMatrix(99); --(96); --(99);--(102); --(33);--(109);--(16);--(13); --(2); --(1160);
    */

END;
/* 26-JUN-2017 Eps 0.03
1,1 : 0
1,2 : ,1911764705882352941176470588235294117647
1,3 : ,5661764705882352941176470588235294117647
1,4 : ,5073529411764705882352941176470588235294
1,5 : ,2058823529411764705882352941176470588235
1,6 : ,2058823529411764705882352941176470588235
2,1 : ,375
2,2 : 0
2,3 : ,3308823529411764705882352941176470588235
2,4 : ,8161764705882352941176470588235294117647
2,5 : ,5220588235294117647058823529411764705882
2,6 : ,5147058823529411764705882352941176470588
3,1 : ,4338235294117647058823529411764705882353
3,2 : ,1029411764705882352941176470588235294118
3,3 : 0
3,4 : ,4338235294117647058823529411764705882353
3,5 : ,1323529411764705882352941176470588235294
3,6 : ,125
4,1 : ,4926470588235294117647058823529411764706
4,2 : ,1691176470588235294117647058823529411765
4,3 : ,5661764705882352941176470588235294117647
4,4 : 0
4,5 : ,1691176470588235294117647058823529411765
4,6 : ,1470588235294117647058823529411764705882
5,1 : ,7941176470588235294117647058823529411765
5,2 : ,3897058823529411764705882352941176470588
5,3 : ,7058823529411764705882352941176470588235
5,4 : ,6544117647058823529411764705882352941176
5,5 : 0
5,6 : ,5
6,1 : ,7941176470588235294117647058823529411765
6,2 : ,4852941176470588235294117647058823529412
6,3 : ,875
6,4 : ,3823529411764705882352941176470588235294
6,5 : ,5
6,6 : 0
*/
/* 26-JUN-2017  Eps 0.05
1,1 : 0
1,2 : ,125
1,3 : ,5073529411764705882352941176470588235294
1,4 : ,0367647058823529411764705882352941176471
1,5 : ,1838235294117647058823529411764705882353
1,6 : ,1691176470588235294117647058823529411765
2,1 : ,0735294117647058823529411764705882352941
2,2 : 0
2,3 : ,0588235294117647058823529411764705882353
2,4 : ,7647058823529411764705882352941176470588
2,5 : ,2426470588235294117647058823529411764706
2,6 : ,3308823529411764705882352941176470588235
3,1 : ,4191176470588235294117647058823529411765
3,2 : ,1029411764705882352941176470588235294118
3,3 : 0
3,4 : ,4191176470588235294117647058823529411765
3,5 : ,1323529411764705882352941176470588235294
3,6 : ,125
4,1 : ,4632352941176470588235294117647058823529
4,2 : ,1470588235294117647058823529411764705882
4,3 : ,5073529411764705882352941176470588235294
4,4 : 0
4,5 : ,1397058823529411764705882352941176470588
4,6 : ,125
5,1 : ,3235294117647058823529411764705882352941
5,2 : ,2352941176470588235294117647058823529412
5,3 : ,2867647058823529411764705882352941176471
5,4 : ,3382352941176470588235294117647058823529
5,5 : 0
5,6 : ,2867647058823529411764705882352941176471
6,1 : ,2573529411764705882352941176470588235294
6,2 : ,4485294117647058823529411764705882352941
6,3 : ,2352941176470588235294117647058823529412
6,4 : ,3088235294117647058823529411764705882353
6,5 : ,4191176470588235294117647058823529411765
6,6 : 0
*/
/* 25-JUN-2017

1,1 : 0
1,2 : ,0217391304347826086956521739130434782609
1,3 : ,576086956521739130434782608695652173913
1,4 : ,0543478260869565217391304347826086956522
1,5 : ,1847826086956521739130434782608695652174
1,6 : ,1956521739130434782608695652173913043478
2,1 : ,0326086956521739130434782608695652173913
2,2 : 0
2,3 : ,0108695652173913043478260869565217391304
2,4 : ,3478260869565217391304347826086956521739
2,5 : ,2282608695652173913043478260869565217391
2,6 : ,25
3,1 : ,423913043478260869565217391304347826087
3,2 : ,0108695652173913043478260869565217391304
3,3 : 0
3,4 : ,423913043478260869565217391304347826087
3,5 : ,1304347826086956521739130434782608695652
3,6 : ,0217391304347826086956521739130434782609
4,1 : ,5326086956521739130434782608695652173913
4,2 : ,1195652173913043478260869565217391304348
4,3 : ,576086956521739130434782608695652173913
4,4 : 0
4,5 : ,1304347826086956521739130434782608695652
4,6 : ,0326086956521739130434782608695652173913
5,1 : ,2173913043478260869565217391304347826087
5,2 : ,2391304347826086956521739130434782608696
5,3 : ,1413043478260869565217391304347826086957
5,4 : ,0869565217391304347826086956521739130435
5,5 : 0
5,6 : ,1304347826086956521739130434782608695652
6,1 : ,0543478260869565217391304347826086956522
6,2 : ,3043478260869565217391304347826086956522
6,3 : ,0217391304347826086956521739130434782609
6,4 : ,0217391304347826086956521739130434782609
6,5 : ,0869565217391304347826086956521739130435
6,6 : 0
*/
/* 18-JUN-2017
1,1 : 0
1,2 : .1911764705882352941176470588235294117647
1,3 : .5661764705882352941176470588235294117647
1,4 : .5073529411764705882352941176470588235294
1,5 : .2058823529411764705882352941176470588235
1,6 : .2058823529411764705882352941176470588235
2,1 : .8088235294117647058823529411764705882353
2,2 : 0
2,3 : .8970588235294117647058823529411764705882
2,4 : .8161764705882352941176470588235294117647
2,5 : .5220588235294117647058823529411764705882
2,6 : .5147058823529411764705882352941176470588
3,1 : .4338235294117647058823529411764705882353
3,2 : .1029411764705882352941176470588235294118
3,3 : 0
3,4 : .4338235294117647058823529411764705882353
3,5 : .1323529411764705882352941176470588235294
3,6 : .125
4,1 : .4926470588235294117647058823529411764706
4,2 : .1838235294117647058823529411764705882353
4,3 : .5661764705882352941176470588235294117647
4,4 : 0
4,5 : .1985294117647058823529411764705882352941
4,6 : .1838235294117647058823529411764705882353
5,1 : .7941176470588235294117647058823529411765
5,2 : .4779411764705882352941176470588235294118
5,3 : .8676470588235294117647058823529411764706
5,4 : .8014705882352941176470588235294117647059
5,5 : 0
5,6 : .5
6,1 : .7941176470588235294117647058823529411765
6,2 : .4852941176470588235294117647058823529412
6,3 : .875
6,4 : .8161764705882352941176470588235294117647
6,5 : .5
6,6 : 0
-- 17-JUN-2017
1,1 : 0
1,2 : .75
1,3 : 1
1,4 : 1
1,5 : .75
1,6 : .75
2,1 : .25
2,2 : 0
2,3 : 1
2,4 : .9
2,5 : .55
2,6 : .45
3,1 : 0
3,2 : 0
3,3 : 0
3,4 : .15
3,5 : 0
3,6 : 0
4,1 : 0
4,2 : .1
4,3 : .85
4,4 : 0
4,5 : 0
4,6 : 0
5,1 : .25
5,2 : .45
5,3 : 1
5,4 : 1
5,5 : 0
5,6 : .45
6,1 : .25
6,2 : .55
6,3 : 1
6,4 : 1
6,5 : .55
6,6 : 0
--------------------------------------------------------------------------------
1,1 : 0
1,2 : .2405462184873949579831932773109243697479
1,3 : .6932773109243697478991596638655462184874
1,4 : .4789915966386554621848739495798319327731
2,1 : .7594537815126050420168067226890756302521
2,2 : 0
2,3 : .905462184873949579831932773109243697479
2,4 : .841386554621848739495798319327731092437
3,1 : .3067226890756302521008403361344537815126
3,2 : .094537815126050420168067226890756302521
3,3 : 0
3,4 : .2079831932773109243697478991596638655462
4,1 : .5210084033613445378151260504201680672269
4,2 : .158613445378151260504201680672268907563
4,3 : .7920168067226890756302521008403361344538
4,4 : 0

0000100111011000	74
0000101010001110	43
0000101110001010	56
0000101110011000	89
0001100111010000	16
0001101110010000	14
0010101000001110	95
0010101100001010	133
0011101100000010	199
0011101100010000	4
0110001000001110	6
0111001000000110	7
0111001100000010	215
0111001100010000	1
                    952

1,1 : 0
1,2 : .2857142857142857142857142857142857142857
1,3 : .5714285714285714285714285714285714285714
1,4 : .5
2,1 : .7142857142857142857142857142857142857143
2,2 : 0
2,3 : .8571428571428571428571428571428571428571
2,4 : .7142857142857142857142857142857142857143
3,1 : .4285714285714285714285714285714285714286
3,2 : .1428571428571428571428571428571428571429
3,3 : 0
3,4 : .4285714285714285714285714285714285714286
4,1 : .5
4,2 : .2857142857142857142857142857142857142857
4,3 : .5714285714285714285714285714285714285714
4,4 : 0

Number of networks:45154
1,1 : 0
1,2 : .2352941176470588235294117647058823529412
1,3 : .5294117647058823529411764705882352941176
1,4 : .4705882352941176470588235294117647058824
2,1 : .7058823529411764705882352941176470588235
2,2 : 0
2,3 : .7647058823529411764705882352941176470588
2,4 : .6470588235294117647058823529411764705882
3,1 : .4705882352941176470588235294117647058824
3,2 : .2352941176470588235294117647058823529412
3,3 : 0
3,4 : .4117647058823529411764705882352941176471
4,1 : .5294117647058823529411764705882352941176
4,2 : .3529411764705882352941176470588235294118
4,3 : .5882352941176470588235294117647058823529
4,4 : 0
*/